/*! bycontract - v0.0.4 - 2016-10-06 */if("object"==typeof module&&"function"!=typeof define)var define=function(a){module.exports=a(require,exports,module)};if("undefined"==typeof define)var define=function(a){return a()};define(function(){"use strict";var a="undefined"!=typeof window?window:global,b=!0,c=Object.prototype.toString,d={},e={arguments:function(a){return"[object Arguments]"===c.call(a)},array:Array.isArray||function(a){return"[object Array]"===c.call(a)},string:function(a){return"[object String]"===c.call(a)},undefined:function(a){return void 0===a},"boolean":function(a){return a===!0||a===!1||"[object Boolean]"===c.call(a)},"function":function(a){return"[object Function]"===c.call(a)||"function"==typeof a},nan:function(a){return a!==a},"null":function(a){return null===a},number:function(a){return!e.nan(a)&&"[object Number]"===c.call(a)},object:function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},regexp:function(a){return"[object RegExp]"===c.call(a)}},f=function(c,d){var g,h;if(!b)return!0;if(e["function"](d))return c instanceof d;if(!e.string(d))throw new j.Exception("Invalid parameters. The second parameter (contract) must be a string or a constructor function");if(d.match(/=$/)){if(!c)return!0;d=d.substr(0,d.length-1)}if(g=e[d.toLowerCase()],"undefined"!=typeof g)return g(c);if("?number"===d)return e.number(c)||e["null"](c);if("!number"===d)return e.number(c)&&!e["null"](c);if(d.indexOf("|")>0)return d.split("|").some(function(a){return f(c,a)});if(0===d.indexOf("Array.<")){if(h=d.match(/Array\.<(.+)>/i),!h)throw new j.Exception("Invalid contract `"+d+"`");return e.array(c)&&c.every(function(a){return f(a,h[1])})}if(0===d.indexOf("Object.<")){if(h=d.match(/Object\.<(.+),\s*(.+)>/i),!h)throw new j.Exception("Invalid contract `"+d+"`");return e.object(c)&&Object.keys(c).every(function(a){return f(a,h[1])&&f(c[a],h[2])})}if(!d.match(/^[a-zA-Z0-9\._]+$/))throw new j.Exception("Invalid contract `"+d+"`");if("function"!=typeof a[d])throw new j.Exception("Invalid contract `"+d+"`");return c instanceof a[d]},g=function(a,b){return JSON.stringify(a.sort())===JSON.stringify(b.sort())},h=function(a,b){return e.string(b)?f(a,b):!!g(Object.keys(a),Object.keys(b))&&Object.keys(a).every(function(c){return c in b&&f(a[c],b[c])})},i=function(a,b,c){var e="undefined"!=typeof c?"of index "+c:"";if(b in d){if(!h(a,d[b]))throw new j.Exception("Value "+e+"incorrectly implements interface `"+b+"`")}else if(!f(a,b))throw new j.Exception("Value "+e+"violates the contract `"+b+"`")},j=function(a,c){if(!b)return a;if("undefined"==typeof c)throw new j.Exception("Invalid parameters. The second parameter (contracts) is missing");if(e.array(c)){if(e.arguments(a)&&(a=[].slice.call(a)),!e.array(a))throw new j.Exception("Invalid parameters. When the second parameter (contracts) is an array, the first parameter (values) must an array too");return c.forEach(function(b,c){var d=a[c];i(d,b)}),a}return i(a,c),a},k=function(a){var b,c,d;if(!a)return"";c=a.split("\n"),b=c[0];do d=c.shift();while(d&&!d.match(/^\s*at byContract/)&&!d.match(/^byContract@/));return("TypeError"===b?"ByContractError\n":"")+c.join("\n")};return j.typedef=function(a,b){if(j([a,b],["string","string|Object.<string, string>"]),a in e)throw new j.Exception("Custom type must not override a primitive");d[a]=b},j.Exception=function(a){j.Exception.prototype.stack=k((new TypeError).stack),this.name="ByContractError",this.message=a},j.Exception.prototype=new TypeError,j.is=e,j.validate=function(a,b){return b in d?h(a,d[b]):f(a,b)},j.isEnabled=b,j["default"]=j,"undefined"!=typeof window&&(window.byContract=j),j});